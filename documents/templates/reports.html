{% extends "base.html" %}
{% load static %}
{% block title %}التقارير{% endblock %}

{% block content %}
<div class="card border-light shadow mt-2">
    <div class="card-header pe-5">
        <h4 class="card-title">التقارير</h4>
    </div>
    <div class="card-body">
        <!-- Bootstrap 5 Tabs -->
        <ul class="nav nav-tabs" id="reportTabs">
            <li class="nav-item">
                <a class="nav-link active" id="decrees-tab" data-bs-toggle="tab" href="#decrees">القرارات</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="objections-tab" data-bs-toggle="tab" href="#objections">الاعتراضات</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="publications-tab" data-bs-toggle="tab" href="#publications">الإشهارات</a>
            </li>
        </ul>

        <div class="tab-content mt-3">
            <!-- Decrees Report -->
            <div class="tab-pane fade show active" id="decrees">
                {% include "reports/decrees_report.html" %}
            </div>

            <!-- Objections Report -->
            <div class="tab-pane fade" id="objections">
                {% include "reports/objections_report.html" %}
            </div>

            <!-- Publications Report -->
            <div class="tab-pane fade" id="publications">
                {% include "reports/publications_report.html" %}
            </div>
        </div>
    </div>
</div>

<script>
    // Preserve active tab on reload
    document.addEventListener("DOMContentLoaded", function () {
        let activeTab = localStorage.getItem("activeTab");
        if (activeTab) {
            let tab = document.querySelector(`#reportTabs a[href="${activeTab}"]`);
            if (tab) {
                new bootstrap.Tab(tab).show();
            }
        }

        document.querySelectorAll("#reportTabs a").forEach(tab => {
            tab.addEventListener("click", function () {
                localStorage.setItem("activeTab", this.getAttribute("href"));
            });
        });
    });
</script>
{% endblock %}
